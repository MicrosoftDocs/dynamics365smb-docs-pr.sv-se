---
title: "Schemalägga jobb att köras automatiskt | Microsoft Docs"
description: "Schemalagda aktiviteter hanteras av jobbkön. Dessa jobb kör rapporter och kodenheter. Du kan ange att jobb ska köras en gång eller återkommande."
author: edupont04
ms.service: dynamics365-business-central
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: 
ms.date: 10/01/2018
ms.author: edupont
ms.translationtype: HT
ms.sourcegitcommit: 9dbd92409ba02281f008246194f3ce0c53e4e001
ms.openlocfilehash: 8f274fe153cb93c31148269aae994218bd0da497
ms.contentlocale: sv-se
ms.lasthandoff: 09/28/2018

---
# <a name="use-job-queues-to-schedule-tasks"></a><span data-ttu-id="f7836-105">Använda jobbköer för att schemalägga uppgifter</span><span class="sxs-lookup"><span data-stu-id="f7836-105">Use Job Queues to Schedule Tasks</span></span>
<span data-ttu-id="f7836-106">Med jobbköer i [!INCLUDE[d365fin](includes/d365fin_md.md)] kan användarna schemalägga och köra specifika rapporter och kodenheter.</span><span class="sxs-lookup"><span data-stu-id="f7836-106">Job queues in [!INCLUDE[d365fin](includes/d365fin_md.md)] enables users to schedule and run specific reports and codeunits.</span></span> <span data-ttu-id="f7836-107">Du kan ange att jobb ska köras en gång eller återkommande.</span><span class="sxs-lookup"><span data-stu-id="f7836-107">You can set jobs to run one time, or on a recurring basis.</span></span> <span data-ttu-id="f7836-108">Du kanske till exempel vill köra rapporten **Säljare försäljningsstatistik** varje vecka, för att spåra försäljningen per säljare under en vecka, eller så kanske du vill köra kodenheten **E-postkö för bearbetningstjänst** dagligen, för att vara säker på att aktuella e-postmeddelanden till kunder angående deras serviceorder skickas ut i tid.</span><span class="sxs-lookup"><span data-stu-id="f7836-108">For example, you might want to run the **Salesperson - Sales Statistics** report weekly, to track sales by salesperson each week, or you might want to run the **Process Service E-mail Queue** codeunit daily, to make sure pending email messages to customers regarding their service orders are sent out in a timely manner.</span></span>  

## <a name="add-jobs-to-the-job-queue"></a><span data-ttu-id="f7836-109">Lägg till jobb till jobbkön</span><span class="sxs-lookup"><span data-stu-id="f7836-109">Add Jobs to the Job Queue</span></span>
<span data-ttu-id="f7836-110">Fönstret **Jobbkötransaktioner** fönstret visas alla aktuella jobb.</span><span class="sxs-lookup"><span data-stu-id="f7836-110">The **Job Queue Entries** window lists all existing jobs.</span></span> <span data-ttu-id="f7836-111">Om du lägger till en ny jobbkötransaktion som du vill schemalägga, måste du ange information om typen av objekt du vill köra, till exempel en rapport eller kodenhet för objekttypen, namnet och objekt-ID för objektet som ska köras.</span><span class="sxs-lookup"><span data-stu-id="f7836-111">If you add a new job queue entry that you want to schedule, you must specify information about the type of object you want to run, such as a report or codeunit, and the name and object ID of the object that you want to run.</span></span> <span data-ttu-id="f7836-112">Du kan också lägga till parametrar för att ange beteendet för jobbkötransaktionen.</span><span class="sxs-lookup"><span data-stu-id="f7836-112">You can also add parameters to specify the behavior of the job queue entry.</span></span> <span data-ttu-id="f7836-113">Du kan t.ex lägga till en planeringsparameter om att endast skicka bokförda försäljningsorder.</span><span class="sxs-lookup"><span data-stu-id="f7836-113">For example, you can add a parameter to only send posted sales orders.</span></span> <span data-ttu-id="f7836-114">Du måste ha behörighet att köra en viss rapport eller kodenhet, annars returneras ett fel när jobbkön körs.</span><span class="sxs-lookup"><span data-stu-id="f7836-114">You must have permission to run the particular report or codeunit, or an error will be returned when the job queue is run.</span></span>  

<span data-ttu-id="f7836-115">I fältet **Kategorifilter för jobbkö** kan du ange ett filter.</span><span class="sxs-lookup"><span data-stu-id="f7836-115">Optionally, you can set a filter in the **Job Queue Category Filter** field.</span></span> <span data-ttu-id="f7836-116">Du kan använda jobbkökategorier för jobb i listan.</span><span class="sxs-lookup"><span data-stu-id="f7836-116">Job queue categories can be used to group jobs in the list.</span></span>

[!INCLUDE[d365fin](includes/d365fin_md.md)] <span data-ttu-id="f7836-117">kör automatiskt projekt efter angivna scheman för varje jobbkötransaktion.</span><span class="sxs-lookup"><span data-stu-id="f7836-117"> automatically runs the jobs according to the specified schedules for each job queue entry.</span></span> <span data-ttu-id="f7836-118">Du kan starta, stoppa och spärra en jobbkötransaktion manuellt.</span><span class="sxs-lookup"><span data-stu-id="f7836-118">You can also start, stop, and put a job queue entry on hold manually.</span></span>

### <a name="log-files"></a><span data-ttu-id="f7836-119">Loggfiler</span><span class="sxs-lookup"><span data-stu-id="f7836-119">Log Files</span></span>
<span data-ttu-id="f7836-120">Fel visas i **loggtransaktioner för jobbkö** som du når från menyfliken.</span><span class="sxs-lookup"><span data-stu-id="f7836-120">Errors are listed in the **Job Queue Log Entries** window that you can access from the ribbon.</span></span> <span data-ttu-id="f7836-121">Du kan också felsöka fel i jobbkön.</span><span class="sxs-lookup"><span data-stu-id="f7836-121">You can also troubleshoot job queue errors.</span></span> <span data-ttu-id="f7836-122">Data som skapas när en jobbkö körs sparas i databasen.</span><span class="sxs-lookup"><span data-stu-id="f7836-122">Data that is generated when a job queue is run is stored in the database.</span></span>  

### <a name="background-posting-with-job-queues"></a><span data-ttu-id="f7836-123">Bakgrundsbokföring med jobbköer</span><span class="sxs-lookup"><span data-stu-id="f7836-123">Background Posting with Job Queues</span></span>
<span data-ttu-id="f7836-124">Jobbköer är ett effektivt verktyg som schemalägger körning av affärsprocesser i bakgrunden.</span><span class="sxs-lookup"><span data-stu-id="f7836-124">Job queues are an effective tool to schedule the running of business processes in the background.</span></span> <span data-ttu-id="f7836-125">Det kan till exempel finnas en instans då flera användare som prövar att bokföra försäljningsorder samtidigt, men endast en order kan behandlas i taget.</span><span class="sxs-lookup"><span data-stu-id="f7836-125">For example, there may be an instance in which multiple users are trying to post sales orders at the same time, but only one order can be processed at a time.</span></span> <span data-ttu-id="f7836-126">Genom att skapa en rutinmässig bakgrundsbokföring, kan du markera transaktionerna i en kö för att bearbeta dem i bakgrunden.</span><span class="sxs-lookup"><span data-stu-id="f7836-126">By setting up a background posting routine, you can place the postings in a queue for processing in the background.</span></span>  

 <span data-ttu-id="f7836-127">Alternativt kan du behöva planera bokföringar vid tidpunkter när det passar organisationen.</span><span class="sxs-lookup"><span data-stu-id="f7836-127">Alternatively, you may want to schedule postings for hours when it is convenient for your organization.</span></span> <span data-ttu-id="f7836-128">Det kan till exempel passa bra för din verksamhet att köra vissa rutiner, när den mesta datainmatningen för dagen har slutförts.</span><span class="sxs-lookup"><span data-stu-id="f7836-128">For example, it may make sense in your business to run certain routines when most of the data entry for the day has concluded.</span></span> <span data-ttu-id="f7836-129">Detta åstadkommer du genom att ställa in jobbkön till att köra olika batch-bokföringsrapporter som t.ex. **Batch-bokför förs.order**, **batch-bokför försäljningsfakturor**, och **batch-bokför försäljningskreditnotor** rapporter.</span><span class="sxs-lookup"><span data-stu-id="f7836-129">You can achieve this by setting the job queue up to run various batch post reports, such as the **Batch Post Sales Orders**, **Batch Post Sales Invoices**, and **Batch Post Sales Credit Memos** reports.</span></span>  

 [!INCLUDE[d365fin](includes/d365fin_md.md)]  <span data-ttu-id="f7836-130">stöder bokföring i bakgrunden för följande dokumenttyper:</span><span class="sxs-lookup"><span data-stu-id="f7836-130"> supports background posting for the following document types:</span></span>  

-   <span data-ttu-id="f7836-131">Försäljning: försäljningsorder, returorder, kreditnota, faktura</span><span class="sxs-lookup"><span data-stu-id="f7836-131">Sales: sales order, return order, credit memo, invoice</span></span>  

-   <span data-ttu-id="f7836-132">Inköp: inköpsorder, returorder, kreditnota, faktura</span><span class="sxs-lookup"><span data-stu-id="f7836-132">Purchases: purchase order, return order, credit memo, invoice</span></span>  

 <span data-ttu-id="f7836-133">Om jobbkön inte kan bokföra försäljningsorder, ändras status till **Fel**, och försäljningsordern läggs till listan över försäljningsorder som användaren måste att hantera.</span><span class="sxs-lookup"><span data-stu-id="f7836-133">If the job queue cannot post the sales order, the status is changed to **Error**, and the sales order is added to the list of sales orders that the user will have to handle.</span></span>  

> [!NOTE]  
>  <span data-ttu-id="f7836-134">När du schemalägger ett dokument för att bokföra, och bokföringsprocessen börjar, konfigureras bokföringsrutinen för automatisk timeout inom två timmar, om bokföringsrutinen slutar att svara.</span><span class="sxs-lookup"><span data-stu-id="f7836-134">When you schedule a document for posting and the posting process begins, the posting routine is automatically configured to time out within two hours if the posting routine stops responding for any reason.</span></span>  

<span data-ttu-id="f7836-135">Du ställer in den här användningen av jobbkön i fönstret **Försäljningsinställningar** eller **inköp** respektive.</span><span class="sxs-lookup"><span data-stu-id="f7836-135">You set up this use of the job queue in the **Sales & Receivables Setup** window or the **Purchases & Payables** window, respectively.</span></span> <span data-ttu-id="f7836-136">På snabbfliken **bakgrundsbokföring** väljer du **Bokföra dokument via jobbkö** och sedan fyller du i relevant information.</span><span class="sxs-lookup"><span data-stu-id="f7836-136">On the **Background Posting** FastTab, you choose the **Post Documents via Job Queue** check box and then fill in the relevant information.</span></span> <span data-ttu-id="f7836-137">Här kan du även använda **Kategorikod för jobbkö** för att köra alla jobbkötransaktioner med samma kod.</span><span class="sxs-lookup"><span data-stu-id="f7836-137">Here you can also use the **Job Queue Category Code** field to run all job queue entries with that code.</span></span> <span data-ttu-id="f7836-138">Du kan t.ex. använda kategorin **SalesPost** som filtrerar fram alla försäljningsorder som matchar en jobbkö med samma kategorikod.</span><span class="sxs-lookup"><span data-stu-id="f7836-138">For example, you can use  a **SalesPost** category that filters to all sales orders that match any job queue that has the same category code.</span></span>  

> [!IMPORTANT]  
>  <span data-ttu-id="f7836-139">Om du ställer in ett jobb som ska bokföra och skriva ut dokument och skrivaren visar en dialogruta, exempelvis en begäran för autentiseringsuppgifter eller en varning om låg bläcknivå, bokförs dokumentet men skrivs inte ut.</span><span class="sxs-lookup"><span data-stu-id="f7836-139">If you set up a job that will post and print documents, and the printer displays a dialog box, such as a request for credentials or a warning about low printer ink, your document is posted but not printed.</span></span> <span data-ttu-id="f7836-140">Motsvarande jobbköpost gör slutligen timeout, och **Status** fältet anges till **Fel**.</span><span class="sxs-lookup"><span data-stu-id="f7836-140">The corresponding job queue entry eventually times out and the **Status** field is set to **Error**.</span></span> <span data-ttu-id="f7836-141">Därmed rekommenderar vi att du inte använder en skrivarinställning som kräver interaktioner med skrivaredialogrutor tillsammans med bakgrundsbokföring.</span><span class="sxs-lookup"><span data-stu-id="f7836-141">Accordingly, we recommend that you do not use a printer setup that requires interaction with the display of printer dialog boxes in conjunction with background posting.</span></span>  

## <a name="use-the-my-job-queue-part"></a><span data-ttu-id="f7836-142">Så här använder du Min jobbködel</span><span class="sxs-lookup"><span data-stu-id="f7836-142">Use the My Job Queue Part</span></span>
<span data-ttu-id="f7836-143">I **Min jobbkö** visas de jobbköer som en användare har inlett men som ännu inte slutfört.</span><span class="sxs-lookup"><span data-stu-id="f7836-143">The **My Job Queue** part shows the job queues entries that a user has started, but which are not yet finished.</span></span> <span data-ttu-id="f7836-144">Som standard visas inte delen, så du behöver lägga till den i ditt rollcenter.</span><span class="sxs-lookup"><span data-stu-id="f7836-144">By default, the part is not visible, so you have to add it to your Role Center.</span></span> <span data-ttu-id="f7836-145">Mer information finns i [Ändra grundläggande inställningar](ui-change-basic-settings.md).</span><span class="sxs-lookup"><span data-stu-id="f7836-145">For more information, see [Changing Basic Settings](ui-change-basic-settings.md).</span></span>  

<span data-ttu-id="f7836-146">I den här delen kan du se dokument som behandlas eller står i kö om ditt ID har angetts i fältet **Tilldelat användar-ID**.</span><span class="sxs-lookup"><span data-stu-id="f7836-146">In this part, you can see those documents that are being processed or that are queued for which your ID is specified in the **Assigned User ID** field.</span></span> <span data-ttu-id="f7836-147">Här får du hjälp att hålla reda på alla jobbkötransaktioner, inklusive de som relaterar till bokföring i bakgrunden.</span><span class="sxs-lookup"><span data-stu-id="f7836-147">The part helps you keep track of all job queue entries, including those related to background posting.</span></span> <span data-ttu-id="f7836-148">Här ser du snabbt om det har uppstått ett fel i bokföringen av ett dokument, eller om det finns fel i en jobbkötransaktion.</span><span class="sxs-lookup"><span data-stu-id="f7836-148">The part can tell you at a glance whether there has been an error in the posting of a document or if there are errors in a job queue entry.</span></span> <span data-ttu-id="f7836-149">Delen ger dig också möjlighet att makulera en dokumentbokföring, om den inte körs.</span><span class="sxs-lookup"><span data-stu-id="f7836-149">The part also lets you cancel a document posting if it is not running.</span></span>  

## <a name="security"></a><span data-ttu-id="f7836-150">Säkerhet</span><span class="sxs-lookup"><span data-stu-id="f7836-150">Security</span></span>  
<span data-ttu-id="f7836-151">Jobbkötransaktioner körs baserat på behörigheter.</span><span class="sxs-lookup"><span data-stu-id="f7836-151">Job queue entries run based on permissions.</span></span> <span data-ttu-id="f7836-152">De behörigheterna måste tillåta att rapporten eller kodmodulen körs.</span><span class="sxs-lookup"><span data-stu-id="f7836-152">Those permissions must allow the execution of the report or codeunit.</span></span>  

<span data-ttu-id="f7836-153">När en jobbkö aktiveras manuellt, körs den med autentiseringsuppgifterna för den användaren.</span><span class="sxs-lookup"><span data-stu-id="f7836-153">When a job queue is activated manually, it is run with the credentials of the user.</span></span> <span data-ttu-id="f7836-154">När en jobbkö aktiveras som en schemalagd uppgift, körs den med autentiseringsuppgifterna för serverinstansen.</span><span class="sxs-lookup"><span data-stu-id="f7836-154">When a job queue is activated as a scheduled task, it is run with the credentials of the server instance.</span></span> <span data-ttu-id="f7836-155">När ett jobb körs, körs det med autentiseringsuppgifterna för jobbkön som aktiverar det.</span><span class="sxs-lookup"><span data-stu-id="f7836-155">When a job is run, it is run with the credentials of the job queue that activates it.</span></span> <span data-ttu-id="f7836-156">Dock, måste användaren som skapade den jobbkötransaktionen, även ha behörigheter.</span><span class="sxs-lookup"><span data-stu-id="f7836-156">However, the user who created that job queue entry must also have permissions.</span></span> <span data-ttu-id="f7836-157">När ett jobb är Kör i användarsession (till exempel i bakgrundsbokföring), körs det med autentiseringsuppgifterna för den användare som skapade jobbet.</span><span class="sxs-lookup"><span data-stu-id="f7836-157">When a job is “run in user session” (such as during background posting), it is run with the credentials of the user who created that job.</span></span>  

> [!IMPORTANT]  
>  <span data-ttu-id="f7836-158">Om du använder behörighetsuppsättningen SUPER som följer med demolicensen för [!INCLUDE[d365fin](includes/d365fin_md.md)], har du och dina användare behörigheter att köra alla artiklar.</span><span class="sxs-lookup"><span data-stu-id="f7836-158">If you use the SUPER permissions set that comes with [!INCLUDE[d365fin](includes/d365fin_md.md)], you and your users have permissions to run all objects.</span></span> <span data-ttu-id="f7836-159">I det här fallet begränsas tillgång för varje användare endast av behörighet för data.</span><span class="sxs-lookup"><span data-stu-id="f7836-159">In this case, access for each user is only limited by permissions for data.</span></span>  

## <a name="using-job-queues-effectively"></a><span data-ttu-id="f7836-160">Använda jobbköer effektivt</span><span class="sxs-lookup"><span data-stu-id="f7836-160">Using Job Queues Effectively</span></span>  
<span data-ttu-id="f7836-161">Jobbkötransaktionsposten har flera fält för att överföra parametrar till en kodmodul som du har angett ska köras med en jobbkö.</span><span class="sxs-lookup"><span data-stu-id="f7836-161">The job queue entry record has many fields whose purpose is to carry parameters into a codeunit that you have specified to be run with a job queue.</span></span> <span data-ttu-id="f7836-162">Det innebär att även kodenheter, som ska köras via jobbkön, måste anges med jobbkötransaktionsposten som en parameter i utlösaren **OnRun**.</span><span class="sxs-lookup"><span data-stu-id="f7836-162">This also means that codeunits that are to be run via the job queue must be specified with the Job Queue Entry record as a parameter in the **OnRun** trigger.</span></span> <span data-ttu-id="f7836-163">Det hjälper till att ge ytterligare en nivå av säkerhet, eftersom det hindrar användare från att köra slumpmässiga kodmoduler via jobbkön.</span><span class="sxs-lookup"><span data-stu-id="f7836-163">This helps provide an extra level of security, as this prevents users from running random codeunits via the job queue.</span></span> <span data-ttu-id="f7836-164">Om användaren måste överföra parametrar till en rapport, är det enda sättet att göra det att låta rapportkörningen ingå i en kodmodul, som sedan analyserar inparametrarna och anger dem i rapporten, innan den körs.</span><span class="sxs-lookup"><span data-stu-id="f7836-164">If the user must pass parameters to a report, the only way to do this is by wrapping the report execution into a codeunit, which then parses the input parameters and enters them into the report before executing it.</span></span>  

## <a name="see-also"></a><span data-ttu-id="f7836-165">Se även</span><span class="sxs-lookup"><span data-stu-id="f7836-165">See Also</span></span>  
[<span data-ttu-id="f7836-166">Administration</span><span class="sxs-lookup"><span data-stu-id="f7836-166">Administration</span></span>](admin-setup-and-administration.md)  
[<span data-ttu-id="f7836-167">Ställa in Business Central</span><span class="sxs-lookup"><span data-stu-id="f7836-167">Setting Up Business Central</span></span>](setup.md)  

